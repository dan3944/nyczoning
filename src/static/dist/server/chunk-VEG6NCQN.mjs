import './polyfills.server.mjs';
import{Ea as pe,Ga as xe,I as P,Ja as ge,K as le,L as se,V as J,W as g,ba as W,ca as A,da as de,ea as fe,fa as K,ga as z,ha as N,ia as B,ja as u,ka as c,la as k,ma as ce,na as ue,oa as I,pa as me,qa as x,ra as C,sa as D,ta as U,ua as Q}from"./chunk-UHY3T6BL.mjs";import{h as ae}from"./chunk-VVCT4QZE.mjs";function j(t,o){let i;if(o===void 0)for(let s of t)s!=null&&(i<s||i===void 0&&s>=s)&&(i=s);else{let s=-1;for(let d of t)(d=o(d,++s,t))!=null&&(i<d||i===void 0&&d>=d)&&(i=d)}return i}function V(t,o){let i;if(o===void 0)for(let s of t)s!=null&&(i>s||i===void 0&&s>=s)&&(i=s);else{let s=-1;for(let d of t)(d=o(d,++s,t))!=null&&(i>d||i===void 0&&d>=d)&&(i=d)}return i}function _(t,o){let i=0;if(o===void 0)for(let s of t)(s=+s)&&(i+=s);else{let s=-1;for(let d of t)(d=+o(d,++s,t))&&(i+=d)}return i}function X(t,o){return t.sourceLinks.length?t.depth:o-1}function S(t){return function(){return t}}function he(t,o){return $(t.source,o.source)||t.index-o.index}function ye(t,o){return $(t.target,o.target)||t.index-o.index}function $(t,o){return t.y0-o.y0}function ee(t){return t.value}function ze(t){return t.index}function Ne(t){return t.nodes}function Be(t){return t.links}function ke(t,o){let i=t.get(o);if(!i)throw new Error("missing: "+o);return i}function ve({nodes:t}){for(let o of t){let i=o.y0,s=i;for(let d of o.sourceLinks)d.y0=i+d.width/2,i+=d.width;for(let d of o.targetLinks)d.y1=s+d.width/2,s+=d.width}}function O(){let t=0,o=0,i=1,s=1,d=24,y=8,h,H=ze,Y=X,w,v,q=Ne,G=Be,F=6;function m(){let e={nodes:q.apply(null,arguments),links:G.apply(null,arguments)};return Ce(e),_e(e),Se(e),Le(e),Te(e),ve(e),e}m.update=function(e){return ve(e),e},m.nodeId=function(e){return arguments.length?(H=typeof e=="function"?e:S(e),m):H},m.nodeAlign=function(e){return arguments.length?(Y=typeof e=="function"?e:S(e),m):Y},m.nodeSort=function(e){return arguments.length?(w=e,m):w},m.nodeWidth=function(e){return arguments.length?(d=+e,m):d},m.nodePadding=function(e){return arguments.length?(y=h=+e,m):y},m.nodes=function(e){return arguments.length?(q=typeof e=="function"?e:S(e),m):q},m.links=function(e){return arguments.length?(G=typeof e=="function"?e:S(e),m):G},m.linkSort=function(e){return arguments.length?(v=e,m):v},m.size=function(e){return arguments.length?(t=o=0,i=+e[0],s=+e[1],m):[i-t,s-o]},m.extent=function(e){return arguments.length?(t=+e[0][0],i=+e[1][0],o=+e[0][1],s=+e[1][1],m):[[t,o],[i,s]]},m.iterations=function(e){return arguments.length?(F=+e,m):F};function Ce({nodes:e,links:l}){for(let[a,n]of e.entries())n.index=a,n.sourceLinks=[],n.targetLinks=[];let r=new Map(e.map((a,n)=>[H(a,n,e),a]));for(let[a,n]of l.entries()){n.index=a;let{source:f,target:p}=n;typeof f!="object"&&(f=n.source=ke(r,f)),typeof p!="object"&&(p=n.target=ke(r,p)),f.sourceLinks.push(n),p.targetLinks.push(n)}if(v!=null)for(let{sourceLinks:a,targetLinks:n}of e)a.sort(v),n.sort(v)}function _e({nodes:e}){for(let l of e)l.value=l.fixedValue===void 0?Math.max(_(l.sourceLinks,ee),_(l.targetLinks,ee)):l.fixedValue}function Se({nodes:e}){let l=e.length,r=new Set(e),a=new Set,n=0;for(;r.size;){for(let f of r){f.depth=n;for(let{target:p}of f.sourceLinks)a.add(p)}if(++n>l)throw new Error("circular link");r=a,a=new Set}}function Le({nodes:e}){let l=e.length,r=new Set(e),a=new Set,n=0;for(;r.size;){for(let f of r){f.height=n;for(let{source:p}of f.targetLinks)a.add(p)}if(++n>l)throw new Error("circular link");r=a,a=new Set}}function Ee({nodes:e}){let l=j(e,n=>n.depth)+1,r=(i-t-d)/(l-1),a=new Array(l);for(let n of e){let f=Math.max(0,Math.min(l-1,Math.floor(Y.call(null,n,l))));n.layer=f,n.x0=t+f*r,n.x1=n.x0+d,a[f]?a[f].push(n):a[f]=[n]}if(w)for(let n of a)n.sort(w);return a}function Me(e){let l=V(e,r=>(s-o-(r.length-1)*h)/_(r,ee));for(let r of e){let a=o;for(let n of r){n.y0=a,n.y1=a+n.value*l,a=n.y1+h;for(let f of n.sourceLinks)f.width=f.value*l}a=(s-a+h)/(r.length+1);for(let n=0;n<r.length;++n){let f=r[n];f.y0+=a*(n+1),f.y1+=a*(n+1)}Fe(r)}}function Te(e){let l=Ee(e);h=Math.min(y,(s-o)/(j(l,r=>r.length)-1)),Me(l);for(let r=0;r<F;++r){let a=Math.pow(.99,r),n=Math.max(1-a,(r+1)/F);je(l,a,n),Ie(l,a,n)}}function Ie(e,l,r){for(let a=1,n=e.length;a<n;++a){let f=e[a];for(let p of f){let L=0,b=0;for(let{source:M,value:Z}of p.targetLinks){let T=Z*(p.layer-M.layer);L+=Pe(M,p)*T,b+=T}if(!(b>0))continue;let E=(L/b-p.y0)*l;p.y0+=E,p.y1+=E,re(p)}w===void 0&&f.sort($),ne(f,r)}}function je(e,l,r){for(let a=e.length,n=a-2;n>=0;--n){let f=e[n];for(let p of f){let L=0,b=0;for(let{target:M,value:Z}of p.sourceLinks){let T=Z*(M.layer-p.layer);L+=Ae(p,M)*T,b+=T}if(!(b>0))continue;let E=(L/b-p.y0)*l;p.y0+=E,p.y1+=E,re(p)}w===void 0&&f.sort($),ne(f,r)}}function ne(e,l){let r=e.length>>1,a=e[r];ie(e,a.y0-h,r-1,l),oe(e,a.y1+h,r+1,l),ie(e,s,e.length-1,l),oe(e,o,0,l)}function oe(e,l,r,a){for(;r<e.length;++r){let n=e[r],f=(l-n.y0)*a;f>1e-6&&(n.y0+=f,n.y1+=f),l=n.y1+h}}function ie(e,l,r,a){for(;r>=0;--r){let n=e[r],f=(n.y1-l)*a;f>1e-6&&(n.y0-=f,n.y1-=f),l=n.y0-h}}function re({sourceLinks:e,targetLinks:l}){if(v===void 0){for(let{source:{sourceLinks:r}}of l)r.sort(ye);for(let{target:{targetLinks:r}}of e)r.sort(he)}}function Fe(e){if(v===void 0)for(let{sourceLinks:l,targetLinks:r}of e)l.sort(ye),r.sort(he)}function Pe(e,l){let r=e.y0-(e.sourceLinks.length-1)*h/2;for(let{target:a,width:n}of e.sourceLinks){if(a===l)break;r+=n+h}for(let{source:a,width:n}of l.targetLinks){if(a===e)break;r-=n}return r}function Ae(e,l){let r=l.y0-(l.targetLinks.length-1)*h/2;for(let{source:a,width:n}of l.targetLinks){if(a===e)break;r+=n+h}for(let{target:a,width:n}of e.sourceLinks){if(a===l)break;r-=n}return r}return m}var be=(()=>{let o=class o{ngOnInit(){let s=O()}};o.\u0275fac=function(d){return new(d||o)},o.\u0275cmp=P({type:o,selectors:[["budget-viz"]],standalone:!0,features:[U],decls:2,vars:0,template:function(d,y){d&1&&(u(0,"p"),x(1,"budget-viz works!"),c())}});let t=o;return t})();function Ve(t,o){t&1&&(u(0,"div",9),k(1,"div",10),c())}function $e(t,o){if(t&1&&(u(0,"div",11),x(1),c()),t&2){let i=I();g(),C(i.errorMessage)}}function Oe(t,o){t&1&&(u(0,"small",32),x(1,"Upcoming"),c())}function Re(t,o){t&1&&(u(0,"small",33),x(1,"Past"),c())}var He=()=>({dateStyle:"long",timeZone:"UTC"});function Ye(t,o){if(t&1){let i=ce();u(0,"a",27),ue("click",function(){let y=le(i).$implicit,h=I(2);return se(h.selectedMeeting=y)}),u(1,"div",28)(2,"strong",29),x(3),c(),W(4,Oe,2,0,"small",30)(5,Re,2,0),c(),u(6,"div",31),x(7),c()()}if(t&2){let i=o.$implicit,s=I(2);fe("active",s.selectedMeeting==i),g(3),D(" ",i.when.toLocaleString("default",Q(5,He))," "),g(),K(4,i.isUpcoming()?4:5),g(3),D("",i.projectCount()," projects")}}function qe(t,o){if(t&1&&(u(0,"tr")(1,"td"),x(2),c(),u(3,"td"),x(4),c(),u(5,"td"),x(6),c()()),t&2){let i=o.$implicit;g(),de("width","50%"),g(),C(i.description),g(2),C(i.location),g(2),C(i.councilmember)}}function Ge(t,o){t&1&&(u(0,"tr")(1,"td",41),x(2,"None found"),c()())}function Ze(t,o){if(t&1&&(u(0,"div",34)(1,"h2",35)(2,"button",36),x(3),c()(),u(4,"div",37)(5,"div",38)(6,"table",39)(7,"tbody")(8,"tr")(9,"th",40),x(10,"Name and description"),c(),u(11,"th",40),x(12,"Location"),c(),u(13,"th",40),x(14,"Councilmember"),c()(),N(15,qe,7,5,"tr",null,z,!1,Ge,3,0,"tr"),c()()()()()),t&2){let i=o.$implicit,s=o.$index;g(2),A("data-bs-target","#accordion"+s),g(),D(" ",i.name," "),g(),me("id","accordion",s,""),g(11),B(i.projects)}}var Je=()=>({dateStyle:"full",timeStyle:"short",timeZone:"UTC"});function We(t,o){if(t&1&&(u(0,"div",12)(1,"div",13)(2,"div",14),x(3,"NYC Planning Commission Meetings"),c(),u(4,"a",15),k(5,"i",16),x(6," Get notified about upcoming meetings "),c(),u(7,"div",17),N(8,Ye,8,6,"a",42,z),c()(),k(10,"div",18),u(11,"div",19)(12,"h2"),x(13),c(),u(14,"div",20),x(15," City Planning Commission Hearing Room, Lower Concourse - 120 Broadway, New York, NY "),c(),u(16,"div",21)(17,"a",22),k(18,"i",23),x(19," View official agenda PDF "),c(),u(20,"a",22),k(21,"i",24),x(22," Add this meeting to your Google Calendar "),c()(),u(23,"div",25),x(24," Click on the headers below to see the projects reviewed at this meeting. "),c(),u(25,"div",26),N(26,Ze,18,4,"div",43,z),c()()()),t&2){let i=I();g(8),B(i.meetings),g(5),C(i.selectedMeeting==null||i.selectedMeeting.when==null?null:i.selectedMeeting.when.toLocaleString("default",Q(3,Je))),g(4),A("href",i.selectedMeeting==null?null:i.selectedMeeting.pdfPath,J),g(3),A("href",i.selectedMeeting==null?null:i.selectedMeeting.gcalLink,J),g(6),B(i.selectedMeeting==null?null:i.selectedMeeting.sections)}}var we=(()=>{let o=class o{constructor(){this.meetings=[],this.isLoading=!0}ngOnInit(){return ae(this,null,function*(){try{let s=yield fetch("asdf").then(d=>d.json());this.meetings=s.map(d=>new te(d)),this.selectedMeeting=this.meetings[0]}catch(s){this.errorMessage=`Error: Failed to get NYC planning agendas: ${s}`}finally{this.isLoading=!1}})}};o.\u0275fac=function(d){return new(d||o)},o.\u0275cmp=P({type:o,selectors:[["app-root"]],standalone:!0,features:[U],decls:13,vars:1,consts:[["class","d-flex justify-content-center"],["id","signupModal","tabindex","-1",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content","iframe-container"],[1,"modal-header"],["data-bs-dismiss","modal",1,"btn-close"],["src","https://cdn.forms-content.sg-form.com/65250b7a-20fe-11ee-a075-3ee1878c20fd"],[1,"modal-footer"],["data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"d-flex","justify-content-center"],[1,"spinner-border","m-3"],[1,"text-danger"],[1,"d-flex","h-100"],[1,"d-flex","flex-column","flex-shrink-0","bg-body-tertiary"],[1,"fs-5","fw-semibold","p-3"],["data-bs-toggle","modal","href","#signupModal",1,"btn","btn-outline-info","mb-3","mx-3"],[1,"bi-bell"],[1,"list-group","list-group-flush","overflow-auto"],[1,"divider"],[1,"overflow-auto","p-3","w-100"],[1,"lead","mb-2"],[1,"d-flex","flex-column"],["target","_blank",1,"text-decoration-none"],[1,"bi-file-earmark-pdf"],[1,"bi-calendar-event"],[1,"small","text-muted","pt-2"],[1,"accordion","pt-1"],["href","#",1,"list-group-item","py-3","lh-sm",3,"click"],[1,"d-flex"],[1,"mb-1"],["class","ms-auto text-warning"],[1,"col-10","mb-1","small"],[1,"ms-auto","text-warning"],[1,"ms-auto","text-secondary"],[1,"accordion-item"],[1,"accordion-header"],["data-bs-toggle","collapse",1,"accordion-button","collapsed","data"],[1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"],[1,"table"],["scope","col"],["colspan","3"],["href","#","class","list-group-item py-3 lh-sm",3,"active"],["class","accordion-item"]],template:function(d,y){d&1&&(k(0,"budget-viz"),W(1,Ve,2,0,"div",0)(2,$e,2,1)(3,We,28,4),u(4,"div",1)(5,"div",2)(6,"div",3)(7,"div",4),k(8,"button",5),c(),k(9,"iframe",6),u(10,"div",7)(11,"button",8),x(12,"Close"),c()()()()()),d&2&&(g(),K(1,y.isLoading?1:y.errorMessage!==void 0?2:3))},dependencies:[be],styles:[".divider[_ngcontent-%COMP%]{height:100vh;width:1.5rem;background-color:#0000001a;box-shadow:inset 0 .125em .5em #0000001a}.iframe-container[_ngcontent-%COMP%]{width:fit-content}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:540px;width:580px}"]});let t=o;return t})(),R=class R{constructor(o){this.id=o.id,this.when=new Date(o.when),this.gcalLink=o.gcal_link,this.pdfPath=o.pdf_path,this.sections=[{name:this.isUpcoming()?"Projects that will have public hearings":"Projects that had public hearings",projects:o.projects.filter(i=>i.is_public_hearing)},{name:this.isUpcoming()?"Projects that will be voted on":"Projects that were voted on",projects:o.projects.filter(i=>!i.is_public_hearing)}]}isUpcoming(){return R.today<=this.when}projectCount(){return this.sections.reduce((o,i)=>o+i.projects.length,0)}};R.today=new Date(new Date().toDateString());var te=R;var Ke=()=>pe(we,{providers:[xe(),ge()]}),Lt=Ke;export{Lt as a};
